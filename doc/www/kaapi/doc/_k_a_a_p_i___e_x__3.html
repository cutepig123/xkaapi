<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Kaapi: How to use KAAPI containers Util::List, Util::StackList and Util::Queue</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="KAAPI_EX_3">How to use KAAPI containers <a class="el" href="class_util_1_1_list.html" title="Single linked list (thread unsafe)The list descriptor is linked to the first and...">Util::List</a>, <a class="el" href="class_util_1_1_stack_list.html" title="Thread linked list (thread unsafe)The StackList descriptor is linked to the top element...">Util::StackList</a> and <a class="el" href="class_util_1_1_queue.html" title="Double linked list (thread unsafe)The queue descriptor is linked to the first and...">Util::Queue</a> </a></h1><p>This example shows how to use KAAPI containers. The example only illustrates how to program with <a class="el" href="class_util_1_1_queue.html" title="Double linked list (thread unsafe)The queue descriptor is linked to the first and...">Util::Queue</a>, but it could be directly applied to <a class="el" href="class_util_1_1_list.html" title="Single linked list (thread unsafe)The list descriptor is linked to the first and...">Util::List</a> and <a class="el" href="class_util_1_1_stack_list.html" title="Thread linked list (thread unsafe)The StackList descriptor is linked to the top element...">Util::StackList</a> containers. The KAAPI containers are specialized for very fast insertion and deletion of element. The idea is to force the type of elements that could be store into container to inherit from <a class="el" href="class_util_1_1_queable.html" title="Base class of object queueable into double linked list.To be en(de)queueable in a...">Util::Queable</a> or <a class="el" href="class_util_1_1_linkable.html" title="Base class to make cells linkable in single linked listTo be (de)linkable in single...">Util::Linkable</a> in order to inherit the data field for linking element together. The <a class="el" href="class_util_1_1_list.html" title="Single linked list (thread unsafe)The list descriptor is linked to the first and...">Util::List</a> and <a class="el" href="class_util_1_1_stack_list.html" title="Thread linked list (thread unsafe)The StackList descriptor is linked to the top element...">Util::StackList</a> containers impose that the type of their elements inherits from <a class="el" href="class_util_1_1_linkable.html" title="Base class to make cells linkable in single linked listTo be (de)linkable in single...">Util::Linkable</a> (such containers in KAAPI are only 'single linked' data structure). The <a class="el" href="class_util_1_1_queue.html" title="Double linked list (thread unsafe)The queue descriptor is linked to the first and...">Util::Queue</a> container imposes that the type inherits from <a class="el" href="class_util_1_1_queable.html" title="Base class of object queueable into double linked list.To be en(de)queueable in a...">Util::Queable</a> that defines double linked data structure.</p>
<h2><a class="anchor" id="KAAPI_COMPIL_3">
Compilation</a></h2>
<p>Simply enter in your build directory examples: </p>
<div class="fragment"><pre class="fragment">      &gt; make queue
</pre></div><h2><a class="anchor" id="KAAPI_RUN_3">
Running</a></h2>
<p>Simply enter </p>
<div class="fragment"><pre class="fragment">      &gt; ./queue 6
</pre></div><p> that will produces </p>
<div class="fragment"><pre class="fragment">      The queue has 6 items
      Queue={ 5 4 3 2 1 0 }
      Queue={ 0 1 2 3 4 5 }
</pre></div><h2><a class="anchor" id="KAAPI_SRC_3">
source</a></h2>
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// ==========================================================================</span>
<a name="l00002"></a>00002 <span class="comment">// (c) INRIA, projet MOAIS, 2006</span>
<a name="l00003"></a>00003 <span class="comment">// see the copyright file for more information</span>
<a name="l00004"></a>00004 <span class="comment">// Author: T. Gautier</span>
<a name="l00005"></a>00005 <span class="comment">// - This example shows how to use Util::Queue container. The main difference</span>
<a name="l00006"></a>00006 <span class="comment">// between STL and KAAPI for such basic container is that in order to insert</span>
<a name="l00007"></a>00007 <span class="comment">// element into container, the type of element should inherits from Queable or</span>
<a name="l00008"></a>00008 <span class="comment">// Linkable structure. This avoid the allocation of cell to link element. </span>
<a name="l00009"></a>00009 <span class="comment">// Nevertheless, it requires that element could only be part of one and only</span>
<a name="l00010"></a>00010 <span class="comment">// one container.</span>
<a name="l00011"></a>00011 <span class="comment">// ==========================================================================</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;kaapi_utils&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">// Item: class of object that may be inserted into a Util::Queue container</span>
<a name="l00017"></a>00017 <span class="keyword">class </span>Item : <span class="keyword">public</span> Util::Queable&lt;Item&gt; {
<a name="l00018"></a>00018   <span class="keywordtype">int</span> _value;
<a name="l00019"></a>00019 <span class="keyword">public</span>:
<a name="l00020"></a>00020   <span class="comment">// Constructor</span>
<a name="l00021"></a>00021   Item( <span class="keywordtype">int</span> n ) : _value(n) {}
<a name="l00022"></a>00022   
<a name="l00023"></a>00023   <span class="keywordtype">int</span> value()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> _value; }
<a name="l00024"></a>00024 };
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="comment">/* Main of the program</span>
<a name="l00028"></a>00028 <span class="comment">   The structure of the main if mostly always the same:</span>
<a name="l00029"></a>00029 <span class="comment">   - initialization of the library (Util)</span>
<a name="l00030"></a>00030 <span class="comment">   - user program in a try / catch block</span>
<a name="l00031"></a>00031 <span class="comment">   - terminaison of the library</span>
<a name="l00032"></a>00032 <span class="comment">*/</span>
<a name="l00033"></a>00033 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   <span class="keywordflow">try</span> {
<a name="l00036"></a>00036     <span class="comment">// initialize the library &#39;Util&#39;</span>
<a name="l00037"></a>00037     <a class="code" href="class_util_1_1_init.html#ad14c4d3472c07e4d403f7434043afdcd">Util::Init::component</a>.is_required_by();
<a name="l00038"></a>00038     <a class="code" href="class_util_1_1_kaapi_component_manager.html#a1a801d9ed71dae818d0ff3bc339d1750">Util::KaapiComponentManager::initialize</a>( argc, argv );
<a name="l00039"></a>00039     
<a name="l00040"></a>00040     <span class="keywordtype">int</span> imax = 0;
<a name="l00041"></a>00041     <span class="keywordflow">if</span> (argc &gt;1) imax = atoi(argv[1]);
<a name="l00042"></a>00042     
<a name="l00043"></a>00043     <a class="code" href="class_util_1_1_queue.html" title="Double linked list (thread unsafe)The queue descriptor is linked to the first and...">Util::Queue&lt;Item&gt;</a> queue;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="comment">// insert in front 1,2,3,4..argv[1] into the queue</span>
<a name="l00046"></a>00046     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt; imax; ++i)
<a name="l00047"></a>00047     {
<a name="l00048"></a>00048       Item* it = <span class="keyword">new</span> Item(i);
<a name="l00049"></a>00049       queue.<a class="code" href="class_util_1_1_queue.html#acdd246261e8d24287d47c649a2985f12">push_front</a>( it );
<a name="l00050"></a>00050     }
<a name="l00051"></a>00051     
<a name="l00052"></a>00052     <span class="keywordflow">if</span> (!queue.<a class="code" href="class_util_1_1_queue.html#a4601edf7a254a50db0225fe4ec7ae2f2">empty</a>()) {
<a name="l00053"></a>00053       std::cout &lt;&lt; <span class="stringliteral">&quot;The queue has &quot;</span> &lt;&lt; queue.<a class="code" href="class_util_1_1_queue.html#a5b6fd90c3b8fed21a774fad2c37e0e12">size</a>() &lt;&lt; <span class="stringliteral">&quot; items&quot;</span> &lt;&lt; std::endl;
<a name="l00054"></a>00054     }
<a name="l00055"></a>00055     
<a name="l00056"></a>00056     <span class="comment">// Display queue from front to back using iterator</span>
<a name="l00057"></a>00057     <a class="code" href="class_util_1_1_queue_1_1iterator.html">Util::Queue&lt;Item&gt;::iterator</a> ibeg = queue.<a class="code" href="class_util_1_1_queue.html#a38ed5ece4833c32b61cb2df6cd409b81">begin</a>();
<a name="l00058"></a>00058     <a class="code" href="class_util_1_1_queue_1_1iterator.html">Util::Queue&lt;Item&gt;::iterator</a> iend = queue.<a class="code" href="class_util_1_1_queue.html#a2b9ad116767385f8860fe5c9e5399d4a">end</a>();
<a name="l00059"></a>00059     std::cout &lt;&lt; <span class="stringliteral">&quot;Queue={ &quot;</span>;
<a name="l00060"></a>00060     <span class="keywordflow">while</span> (ibeg != iend) {
<a name="l00061"></a>00061       std::cout &lt;&lt; ibeg-&gt;value() &lt;&lt; <span class="charliteral">&#39; &#39;</span>;
<a name="l00062"></a>00062       ++ibeg;
<a name="l00063"></a>00063     }
<a name="l00064"></a>00064     std::cout &lt;&lt; <span class="stringliteral">&quot;}&quot;</span> &lt;&lt; std::endl;
<a name="l00065"></a>00065     
<a name="l00066"></a>00066     <span class="comment">// Display queue from front to back using method &#39;prev()&#39; on Item</span>
<a name="l00067"></a>00067     Item* curr = queue.<a class="code" href="class_util_1_1_queue.html#a1ad066234dc6911e7236f76b3d6ad8ff">back</a>();
<a name="l00068"></a>00068     std::cout &lt;&lt; <span class="stringliteral">&quot;Queue={ &quot;</span>;
<a name="l00069"></a>00069     <span class="keywordflow">while</span> (curr != 0) {
<a name="l00070"></a>00070       std::cout &lt;&lt; curr-&gt;value() &lt;&lt; <span class="charliteral">&#39; &#39;</span>;
<a name="l00071"></a>00071       curr = curr-&gt;prev();
<a name="l00072"></a>00072     }
<a name="l00073"></a>00073     std::cout &lt;&lt; <span class="stringliteral">&quot;}&quot;</span> &lt;&lt; std::endl;
<a name="l00074"></a>00074     
<a name="l00075"></a>00075     <span class="comment">// terminate the library &#39;Util&#39;</span>
<a name="l00076"></a>00076     <a class="code" href="class_util_1_1_kaapi_component_manager.html#ab159213cca300a957b1190919c2424a2">Util::KaapiComponentManager::terminate</a>();
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="keywordflow">return</span> 0;
<a name="l00079"></a>00079   } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code" href="class_util_1_1_posix_error.html">Util::PosixError</a>&amp; ex) {
<a name="l00080"></a>00080     std::cerr &lt;&lt; <span class="stringliteral">&quot;[Catch]:&quot;</span> &lt;&lt; ex.<a class="code" href="class_util_1_1_posix_error.html#a32e486167f88780b2cea76aa173e0870">what</a>() &lt;&lt; std::endl;
<a name="l00081"></a>00081   } <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code" href="class_util_1_1_exception.html" title="Base class for the KAAPI&amp;#39;s exception hierarchy Base class for hierarchy of error...">Util::Exception</a>&amp; ex) {
<a name="l00082"></a>00082     std::cerr &lt;&lt; <span class="stringliteral">&quot;[Catch]:&quot;</span> &lt;&lt; ex.<a class="code" href="class_util_1_1_exception.html#ad15cb00bb04746ae283c3ddd20ebb9c6">what</a>() &lt;&lt; std::endl;
<a name="l00083"></a>00083   } <span class="keywordflow">catch</span> (...) {
<a name="l00084"></a>00084     std::cerr &lt;&lt; <span class="stringliteral">&quot;[Catch] unknown error&quot;</span> &lt;&lt; std::endl;
<a name="l00085"></a>00085   }
<a name="l00086"></a>00086   <span class="keywordflow">return</span> -1;
<a name="l00087"></a>00087 }
</pre></div> </div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Jun 16 08:51:57 2010 for Kaapi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
