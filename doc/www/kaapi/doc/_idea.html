<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Kaapi: Understanding implantation of KAAPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="Idea">Understanding implantation of KAAPI </a></h1><h2><a class="anchor" id="KAAPI_SIMPLEEXAMPLE">
Running example</a></h2>
<p>Some examples are avalaible in the source code directory kaapi-src/examples. To compile them in the build directory: </p>
<div class="fragment"><pre class="fragment">      &gt; cd build/kaapi/examples
      &gt; make examples or make fibo_apiatha
      ...
      &gt; ./fibo_apiatha 30 1 15  #30: the 30-th fibonacci number, 1= number of threads, 15 threshold to stop recursivity
</pre></div><p>Important note: self documentation of KAAPI is displayed by the command line argument --help. All KAAPI script or program compiled with KAAPI accept this option. For instance: </p>
<div class="fragment"><pre class="fragment">    &gt; ./fibo_apiatha --help
</pre></div><p> One particular option is --dumprc in order to dump default value of properties into the file 'dump.rc' in order to change them for next run. KAAPI looks for a properties' file named 'kaapi.rc' in $HOME and $PWD.</p>
<p>To run the same program on several machines, the user may use the karun command: </p>
<div class="fragment"><pre class="fragment">    &gt; /usr/local/kaapi/bin/karun -np &lt;number of processes&gt; -f &lt;hostnames&gt; fibo_apiatha 30 1 15
</pre></div><h2><a class="anchor" id="KAAPI_COMPILE">
Compiling an external program with the kaapi library</a></h2>
<p>You need to compile your program with the flags present in the {$KAAPI} variable and link to the libraries present in the {$KAAPI}. So, you will use something as: </p>
<div class="fragment"><pre class="fragment">      &gt; g++ -o program.o -c [-Wall -g -O2] $KAAPI_CPPFLAGS program.cpp
      &gt; g++ -o program program.o $KAAPI_LDFLAGS
</pre></div><p>Following paragraph deals with quick description of software design and architecture.</p>
<h2><a class="anchor" id="KAAPI_DESIGN">
Design</a></h2>
<h2><a class="anchor" id="KAAPI_ARCHI">
Architecture</a></h2>
<p>KAAPI is design on top of an operating system with POSIX like capabilities for multithreading and synchronization. Most of the low level portability definitions are in the namespace <a class="el" href="group___util.html">Util</a>. This namespace contains definitions of <a class="el" href="class_util_1_1_thread.html">Util::Thread</a> creation, synchronization objects such as <a class="el" href="class_util_1_1_mutex.html">Util::Mutex</a> for mutal exclusion and condition variable <a class="el" href="class_util_1_1_condition.html">Util::Condition</a>. This namespace contains also some important definitions for atomic operation such as <a class="el" href="group___multithreading.html#gabcd58469ff80de36f6125dfb5ff0ea7c">KAAPI_CAS</a> (compare and swap). Last definitions are for containers with low overhead (see <a class="el" href="class_util_1_1_stack_list.html">Util::StackList</a>, <a class="el" href="class_util_1_1_list.html">Util::List</a> and <a class="el" href="class_util_1_1_queue.html">Util::Queue</a>) and miscellaneous objects such as various timers (<a class="el" href="class_util_1_1_cpu_timer.html">Util::CpuTimer</a>, <a class="el" href="class_util_1_1_sys_timer.html">Util::SysTimer</a> and WallTimer) and properties definition close to Java's properties (<a class="el" href="class_util_1_1_properties.html">Util::Properties</a>).</p>
<h2><a class="anchor" id="KAAPI_DOC_DFG">
Data flow graph representation</a></h2>
<p>At the base of the execution model of KAAPI is the macro dataflow model. A dataflow graph allows for a natural representation of a parallel execution, and it can be exploited to achieve fault-tolerance. By the principle of dataflow, tasks become ready for execution upon availability of their input data. The data flow graph is mainly managed by classes defined in the namespace <a class="el" href="namespace_d_f_g.html" title="Basic class to allows the definition of the data flow graph.">DFG</a> (see documentation of the module <a class="el" href="group___d_f_g.html">Data Flow Graph</a>). The data flow graph is an directed acyclic graph (DAG) that contains two kind of nodes: closures and accesses to global data. Moreover, the KAAPI representation also defined what is the order of execution of the closures in the graph, this order respect the data flow constraints, and is called the <b>reference</b> <b>order</b> of the graph.</p>
<p>The KAAPI implementation fix the data structure to represent such a data flow graph. The user or the developper should understand this data structure in order to write its algorithm to access or modify the data flow graph, and thus the behavioural of the execution.</p>
<p>Next figure, on the left, presents a classical view of the data flow graph. Right part presents the internal representation of the classical view. This internal representation is the data flow graph representation of any execution in KAAPI. </p>
<div align="center">
<img src="inline_dotgraph_1.dot.png" alt="inline_dotgraph_1.dot" border="0" usemap="#inline_dotgraph_1.dot.map">
<map name="inline_dotgraph_1.dot.map" id="inline_dotgraph_1.dot.map"></map>
</div>
 </div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Jun 16 08:51:57 2010 for Kaapi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
