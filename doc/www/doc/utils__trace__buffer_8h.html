<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Kaapi: utils_trace_buffer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>utils_trace_buffer.h File Reference</h1>
<p>Base on Inuktituté© INRIA Tracing facility;.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_util_1_1_record_key.html">Util::RecordKey</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="class_util_1_1_key.html" title="Thread private attributeThis class provides an interface to posix pthread specific...">Key</a> for record descriptor.  <a href="struct_util_1_1_record_key.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_util_1_1_raw_record.html">Util::RawRecord</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A RecordBufferEvent class record This class is the root class from which all record events inherit. Derived record must define the date and field of event. The main use is for reading &amp; analyzing a trace file.  <a href="struct_util_1_1_raw_record.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_util_1_1_record.html">Util::Record</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Expended record event This class is root class that extend by expending all informations about an event that is contained in <a class="el" href="class_util_1_1_event_buffer.html" title="A Generic Trace Buffer class: Util::EventBuffer.">EventBuffer</a>.  <a href="struct_util_1_1_record.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_util_1_1_record_desc.html">Util::RecordDesc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A Generic <a class="el" href="struct_util_1_1_event.html">Event</a> record descriptor class.  <a href="class_util_1_1_record_desc.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_util_1_1_record_desc_1_1_field.html">Util::RecordDesc::Field</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_util_1_1_record_desc_1_1_structure.html">Util::RecordDesc::Structure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_util_1_1_record_manager.html">Util::RecordManager</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="struct_util_1_1_record.html" title="Expended record event This class is root class that extend by expending all informations...">Record</a> descriptor manager.  <a href="class_util_1_1_record_manager.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html">Util</a></td></tr>

<p><tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The <a class="el" href="namespace_util.html" title="The Util namespace contains definitions to port the library onto an operating system...">Util</a> namespace contains definitions to port the library onto an operating system. </p>
<br/></td></tr>
</p>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <br/>
&nbsp;&nbsp;<a class="el" href="namespace_util.html#ad622c280775073b2d745c1690bf76b05a1d9bd7187f989a093b0d7f4cc9038d3a">Util::MAX_LEVEL_NO</a> =  16, 
<br/>
&nbsp;&nbsp;<a class="el" href="namespace_util.html#ad622c280775073b2d745c1690bf76b05aea3907902e6e2561684a444002a88c0d">Util::MAX_EVENT_NO</a> =  64
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils__trace__buffer_8h.html#a07208d80429fce0d21c466bdde4e859e">operator&lt;&lt;</a> (std::ostream &amp;sout, const <a class="el" href="class_util_1_1_record_desc_1_1_field.html">Util::RecordDesc::Field</a> &amp;s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils__trace__buffer_8h.html#a06977e39d3d3dcd0112cd5ac662b8f20">operator&lt;&lt;</a> (std::ostream &amp;sout, const <a class="el" href="class_util_1_1_record_desc_1_1_structure.html">Util::RecordDesc::Structure</a> &amp;s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils__trace__buffer_8h.html#a73f4b2cf81c24c867c80693e38e9588c">operator&lt;&lt;</a> (std::ostream &amp;sout, const <a class="el" href="class_util_1_1_record_desc.html">Util::RecordDesc</a> &amp;s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::istream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils__trace__buffer_8h.html#ad0b8f0c8247153222cd10da9c37fd2d4">operator&gt;&gt;</a> (std::istream &amp;sin, <a class="el" href="class_util_1_1_record_desc_1_1_field.html">Util::RecordDesc::Field</a> &amp;s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::istream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils__trace__buffer_8h.html#a98cfd5cbd96b232ff0066d5d845d8a0f">operator&gt;&gt;</a> (std::istream &amp;sin, <a class="el" href="class_util_1_1_record_desc_1_1_structure.html">Util::RecordDesc::Structure</a> &amp;s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::istream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils__trace__buffer_8h.html#a786ac1ae36594666da4f862b988768e8">operator&gt;&gt;</a> (std::istream &amp;sin, <a class="el" href="class_util_1_1_record_desc.html">Util::RecordDesc</a> &amp;s)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a7dadfd1e77d98abe82328b4614a73983">Util::Mask_Level</a> [MAX_LEVEL_NO]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a79ff0e7f6205a67ed98aa2e97aa381c6">Util::Mask_Event</a> [MAX_LEVEL_NO][MAX_EVENT_NO]</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const TraceLevelNo&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#ad1ddf8f9501df73b2b09ff1f4c85d2fa">Util::tracer_level_no</a> = 0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Predefined FlushBuffer events Events used to trace the behavior of the buffer allocation strategy.  <a href="#ad1ddf8f9501df73b2b09ff1f4c85d2fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const TraceEventNo&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#adcbaa285b3864e6ff824276038ebe02a">Util::alloc_buffer_no</a> = 0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">allocate buffer event  <a href="#adcbaa285b3864e6ff824276038ebe02a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const EventSize&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#ab2dfa262c42b6de5872a13d33a6e1a02">Util::alloc_event_size</a> = event_static_size_raw + sizeof(HighResTimer::type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">static size for flush buffer event  <a href="#ab2dfa262c42b6de5872a13d33a6e1a02"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const TraceEventNo&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a191c53bb9284bcfb0e1d436d35bb30e3">Util::flush_buffer_no</a> = 1</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flush buffer event  <a href="#a191c53bb9284bcfb0e1d436d35bb30e3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const EventSize&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#abef8fa929c876581e6279ad17ee0106a">Util::flush_event_size</a> = event_static_size_raw + sizeof(HighResTimer::type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">static size for flush buffer event  <a href="#abef8fa929c876581e6279ad17ee0106a"></a><br/></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef ka_uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a79b83c7c0fa1bcb395be2d6cfc9731e8">Util::TraceLevelNo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">types for numbering levels  <a href="#a79b83c7c0fa1bcb395be2d6cfc9731e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef ka_uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a1bed26f838870c13fd698623e2f2411d">Util::TraceEventNo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">types for numbering events  <a href="#a1bed26f838870c13fd698623e2f2411d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef ka_uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#ac8d73f34de8e99c8468556e18903fc6c">Util::EventSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of the event size.  <a href="#ac8d73f34de8e99c8468556e18903fc6c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef ka_uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a3d810110691acfc7d7b4b66194851282">Util::NodeId</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of a node rank.  <a href="#a3d810110691acfc7d7b4b66194851282"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef unsigned short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#ad98367e128d0e5dd2f33e19de3b6e234">Util::StringSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const ka_uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#a36732747a57ba86f48504cb162fbeba5">Util::event_static_size_raw</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of the static part of an event in raw file format.  <a href="#a36732747a57ba86f48504cb162fbeba5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const ka_uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_util.html#adfaba86e32e59693a26ac79fa6672715">Util::event_static_size_trc</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Base on Inuktituté© INRIA Tracing facility;. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>T. Gautier. Based on code developped by J. Briat for Inuktitut library. This file is dedicated to the base types for coding event. It is used for recording or reading an event record to/from a trace This part is environnement dependant and must be adapted as needed.</dd></dl>
<p>Overview of the process of generating events from execution. A KAAPI execution is supported by a communicating set of processes. Each processes generates events in dedicated file. Inside a process, they are multiple concurrent threads of control. Each thread generated stores its events in a dedicated EventBuffer. When an EventBuffer is full, the thread swap to a new allocated EventBuffer and the old one is stored in the file associated with the process. Depending on the scheduling of thread into the process, the event file contains a sequence of EventBuffer which is not ordered by the time of each event. This re-ordorering of events is part of the post processing step.</p>
<p>In order to reduce the information associated to events, the information common to a thread (its context id, global id) are stored into the header part of each EventBuffer. Each event into the event buffer does not contains this common information. Because thread may switch from processor to an other processor during the execution, this information is generated by an event that indicates the current processor of thread. This event is generated when the thread is starting and when the thread resumes its execution.</p>
<p>The file as a sequence of EventBuffer is called the raw format of the event file (suffix .raw). The post processing phase using utility kaapiraw2trace allows to convert this representation into a file that contains the sequence of event records that expand the common thread information to each event. Moreover this utility also expand the (logical processor identifier) by decoding the scheduling event of thread, if generated. This file is called the trace file (suffix .trc).</p>
<p>The utility kaapimergetrace allows to merge several trace file or raw file format to a unique trace file. The utility kaapisorttrace sorts a trace file according to the date of each event. Moreover it allows to take as input a correction time description to apply with each process in order to sort events according to an estimated global clock. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a73f4b2cf81c24c867c80693e38e9588c"></a><!-- doxytag: member="utils_trace_buffer.h::operator&lt;&lt;" ref="a73f4b2cf81c24c867c80693e38e9588c" args="(std::ostream &amp;sout, const Util::RecordDesc &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>sout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_util_1_1_record_desc.html">Util::RecordDesc</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a06977e39d3d3dcd0112cd5ac662b8f20"></a><!-- doxytag: member="utils_trace_buffer.h::operator&lt;&lt;" ref="a06977e39d3d3dcd0112cd5ac662b8f20" args="(std::ostream &amp;sout, const Util::RecordDesc::Structure &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>sout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_util_1_1_record_desc_1_1_structure.html">Util::RecordDesc::Structure</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a07208d80429fce0d21c466bdde4e859e"></a><!-- doxytag: member="utils_trace_buffer.h::operator&lt;&lt;" ref="a07208d80429fce0d21c466bdde4e859e" args="(std::ostream &amp;sout, const Util::RecordDesc::Field &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>sout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_util_1_1_record_desc_1_1_field.html">Util::RecordDesc::Field</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a786ac1ae36594666da4f862b988768e8"></a><!-- doxytag: member="utils_trace_buffer.h::operator&gt;&gt;" ref="a786ac1ae36594666da4f862b988768e8" args="(std::istream &amp;sin, Util::RecordDesc &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::istream&amp; operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&nbsp;</td>
          <td class="paramname"> <em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_util_1_1_record_desc.html">Util::RecordDesc</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a98cfd5cbd96b232ff0066d5d845d8a0f"></a><!-- doxytag: member="utils_trace_buffer.h::operator&gt;&gt;" ref="a98cfd5cbd96b232ff0066d5d845d8a0f" args="(std::istream &amp;sin, Util::RecordDesc::Structure &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::istream&amp; operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&nbsp;</td>
          <td class="paramname"> <em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_util_1_1_record_desc_1_1_structure.html">Util::RecordDesc::Structure</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad0b8f0c8247153222cd10da9c37fd2d4"></a><!-- doxytag: member="utils_trace_buffer.h::operator&gt;&gt;" ref="ad0b8f0c8247153222cd10da9c37fd2d4" args="(std::istream &amp;sin, Util::RecordDesc::Field &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::istream&amp; operator&gt;&gt; </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&nbsp;</td>
          <td class="paramname"> <em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_util_1_1_record_desc_1_1_field.html">Util::RecordDesc::Field</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Jun 16 08:51:57 2010 for Kaapi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
